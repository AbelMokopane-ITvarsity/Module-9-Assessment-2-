<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>World Time</title>
    <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
</head>
<body>
    <p id="local">Loading...</p>
    <div id="output"></div>

    <script>
        var timer = setInterval(displayWorldTime, 1000);

        var cities = [
            { name: "Istanbul", tz: "Europe/Istanbul", flag: "Turkey.png" },
            { name: "New York City", tz: "America/New_York", flag: "United-States-Of-America.png" },
            { name: "Tokyo", tz: "Asia/Tokyo", flag: "Japan.png" },
            { name: "Moscow", tz: "Europe/Moscow", flag: "Russia.png" },
            { name: "Rio De Janeiro", tz: "America/Sao_Paulo", flag: "Brazil.png" },
            { name: "Sydney", tz: "Australia/Sydney", flag: "Australia.png" },
            { name: "Vancouver", tz: "America/Vancouver", flag: "Canada.png" },
            { name: "Beijing", tz: "Asia/Shanghai", flag: "China.png" },

            { name: "London", tz: "Europe/London", flag: "United-Kingdom.png" },
            { name: "Paris", tz: "Europe/Paris", flag: "France.png" },
            { name: "Berlin", tz: "Europe/Berlin", flag: "Germany.png" },
            { name: "Cairo", tz: "Africa/Cairo", flag: "Egypt.png" },
            { name: "Dubai", tz: "Asia/Dubai", flag: "United-Arab-Emirates.png" },
        ];

        cities.sort((a, b) => a.name.localeCompare(b.name));

        function getCurrentTime(tz) {
            return new Intl.DateTimeFormat("en-GB", {
                hour: "2-digit",
                minute: "2-digit",
                second: "2-digit",
                hour12: false,
                timeZone: tz,
            }).format(new Date());
        }

        function displayWorldTime() {
            var localTime = new Date().toLocaleTimeString();
            document.getElementById("local").textContent = "Local time: " + localTime;

            var output = `<table id="cities">`;
            output += `
                <thead>
                    <tr>
                        <th class="col1"></th>
                        <th class="col2">City</th>
                        <th>Current Time</th>
                    </tr>
                </thead>
                <tbody>`;

            for (let a = 0; a < cities.length; a++) {
                output += `
                    <tr>
                        <td><img src="img/${cities[a].flag}" alt="${cities[a].name} flag" /></td>
                        <td>${cities[a].name}</td>
                        <td>${getCurrentTime(cities[a].tz)}</td>
                    </tr>`;
            }
            output += `</tbody></table>`;
            document.getElementById("output").innerHTML = output;
        }
    </script>
</body>
</html>
